var curve;!function(e){e.version="0.1.0"}(curve||(curve={}));var curve;!function(e){var t=CanvasRenderingContext2D.prototype;t.ellipse||(t.ellipse=function(e,t,r,n,o,a,i,c){this.save(),this.translate(e,t),this.rotate(o),this.scale(r,n),this.arc(0,0,1,a,i,c),this.restore()})}(curve||(curve={}));var curve;!function(e){var t=CanvasRenderingContext2D.prototype;t.setFillRule||(t.setFillRule=function(e){this.fillRule=e})}(curve||(curve={})),function(e){"function"!=typeof e.TextEncoder&&(e.TextEncoder=function(){function e(){Object.defineProperties(this,{encoding:{value:"utf-8",writable:!1}})}return e.prototype.encode=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<r.length;n++)r[n]=e.charCodeAt(n);return r},e}())}(this);var curve;!function(e){var t;!function(t){var r;!function(t){function r(e,t,r,n,o){var a=n-e,c=o-t;return r?i.create(c,-a):i.create(-c,a)}function n(e,t,r,n,o){var a=n-e,c=o-t;return r?i.create(c,-a):i.create(-c,a)}function o(e,t,r,n,o,a,i){var c=(r-e)*(a-t)-(o-e)*(n-t);return 0===c?!0:c>0&&i?!0:0>c&&!i?!0:!1}function a(t,r,n,o,a){var c=n/2;switch(o){case e.PenLineCap.Round:return{x1:t-c,x2:t+c,y1:r-c,y2:r+c};case e.PenLineCap.Square:var u=i.normalize(i.clone(a)),s=i.orthogonal(i.clone(u));return{x1:t+c*(u[0]+s[0]),x2:t+c*(u[0]-s[0]),y1:r+c*(u[1]+s[1]),y2:r+c*(u[1]-s[1])};case e.PenLineCap.Flat:default:var s=i.orthogonal(i.normalize(i.clone(a)));return{x1:t+c*s[0],x2:t+c*-s[0],y1:r+c*s[1],y2:r+c*-s[1]}}}var i=la.vec2,c=function(){function e(){this.isMove=!1}return e.prototype.init=function(e,t,a){var c=a[0],u=a[1],s=a[2],l=a[3],v=a[4],f=a[5];e=c+s*Math.cos(l),t=u+s*Math.sin(l);var p=c+s*Math.cos(v),h=u+s*Math.sin(v),x=c-s,y=o(e,t,p,h,x,u,f),d=c+s,m=o(e,t,p,h,d,u,f),T=u-s,b=o(e,t,p,h,c,T,f),M=u+s,S=o(e,t,p,h,c,M,f);return{sx:e,sy:t,l:x,cl:y,r:d,cr:m,t:T,ct:b,b:M,cb:S,endPoint:i.create(p,h),startVector:r(c,u,f,e,t),endVector:n(c,u,f,p,h)}},e.prototype.extendFillBox=function(e,t,r,n,o){var a=n[3],i=n[4];if(i!==a){var c=o.endPoint,u=c[0],s=c[1];e.l=Math.min(e.l,t,u),e.r=Math.max(e.r,t,u),e.t=Math.min(e.t,r,s),e.b=Math.max(e.b,r,s),o.cl&&(e.l=Math.min(e.l,o.l)),o.cr&&(e.r=Math.max(e.r,o.r)),o.ct&&(e.t=Math.min(e.t,o.t)),o.cb&&(e.b=Math.max(e.b,o.b))}},e.prototype.extendStrokeBox=function(e,t,r,n,o,c){var u=n[3],s=n[4];if(s!==u){var l=o.endPoint,v=l[0],f=l[1];e.l=Math.min(e.l,t,v),e.r=Math.max(e.r,t,v),e.t=Math.min(e.t,r,f),e.b=Math.max(e.b,r,f);var p=c.strokeThickness/2;o.cl&&(e.l=Math.min(e.l,o.l-p)),o.cr&&(e.r=Math.max(e.r,o.r+p)),o.ct&&(e.t=Math.min(e.t,o.t-p)),o.cb&&(e.b=Math.max(e.b,o.b+p));var h=c.strokeStartLineCap||c.strokeEndLineCap||0,x=i.reverse(i.clone(o.startVector)),y=a(t,r,c.strokeThickness,h,x),d=a(v,f,c.strokeThickness,h,o.endVector);e.l=Math.min(e.l,y.x1,y.x2,d.x1,d.x2),e.r=Math.max(e.r,y.x1,y.x2,d.x1,d.x2),e.t=Math.min(e.t,y.y1,y.y2,d.y1,d.y2),e.b=Math.max(e.b,y.y1,y.y2,d.y1,d.y2)}},e}();t.Arc=c}(r=t.extenders||(t.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){var t=la.vec2,r=function(){function e(){this.isMove=!1}return e.prototype.init=function(e,r,n){var o=n[0],a=n[1];return{startVector:t.create(o-e,a-r),endVector:t.create(o-e,a-r),endPoint:t.create(o,a)}},e.prototype.extendFillBox=function(e,t,r,n,o){var a=n[0],i=n[1];e.l=Math.min(e.l,a),e.r=Math.max(e.r,a),e.t=Math.min(e.t,i),e.b=Math.max(e.b,i)},e.prototype.extendStrokeBox=function(e,t,r,n,o,a){this.extendFillBox(e,t,r,n,o)},e}();e.LineTo=r}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){function t(e,t,r,n){var o=[r,n];return{args:o,metrics:c.init(e,t,o)}}function r(e,t,r,n,a){var c=o(e,t,r,n),u=!la.vec2.isClockwiseTo(t,n),s=Math.atan2(e[1]-c[1],e[0]-c[0]);0>s&&(s=2*Math.PI+s);var l=Math.atan2(r[1]-c[1],r[0]-c[0]);0>l&&(l=2*Math.PI+l);var v=[c[0],c[1],a,s,l,u];return{args:v,metrics:i.init(e[0],e[1],v)}}function n(e,t,r,n,o){var a=Math.sqrt(n[0]*n[0]+n[1]*n[1]),i=t/Math.tan(e/2),c=i/a;return o&&(c=1-c),la.vec2.create(r[0]+c*n[0],r[1]+c*n[1])}function o(e,t,r,n){var o=a.orthogonal(a.clone(t)),i=a.orthogonal(a.clone(n));return a.intersection(e,o,r,i)}var a=la.vec2,i=new e.Arc,c=new e.LineTo,u=function(){function e(){this.isMove=!1}return e.prototype.init=function(e,o,i){var c=i[0],u=i[1],s=i[2],l=i[3],v=i[4],f=a.create(c-e,u-o),p=a.create(s-c,l-u),h=Math.PI-a.angleBetween(f,p),x=n(h,v,a.create(e,o),f,!0),y=n(h,v,a.create(c,u),p,!1),d=t(e,o,x[0],x[1]),m=r(x,f,y,p,v);return{line:d,arc:m,startVector:d.metrics.startVector,endVector:m.metrics.endVector,endPoint:m.metrics.endPoint}},e.prototype.extendFillBox=function(e,t,r,n,o){c.extendFillBox(e,t,r,o.line.args,o.line.metrics);var a=o.line.metrics.endPoint;i.extendFillBox(e,a[0],a[1],o.arc.args,o.arc.metrics)},e.prototype.extendStrokeBox=function(e,t,r,n,o,a){c.extendStrokeBox(e,t,r,o.line.args,o.line.metrics,a);var u=o.line.metrics.endPoint;i.extendStrokeBox(e,u[0],u[1],o.arc.args,o.arc.metrics,a)},e}();e.ArcTo=u}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){function t(e,t,n,o,a,i,c,u){return{x:r(e,t,n,o),y:r(a,i,c,u)}}function r(e,t,r,n){var o=2*e-4*t+2*r,a=t-e,i=-e+3*t+n-3*r,c=Math.sqrt(o*o-4*a*i),u=[null,null];if(isNaN(c))return u;var s,l;return s=(-o+c)/(2*i),s>=0&&1>=s&&(l=1-s,u[0]=e*l*l*l+3*t*s*l*l+3*r*l*s*s+n*s*s*s),s=(-o-c)/(2*i),s>=0&&1>=s&&(l=1-s,u[1]=e*l*l*l+3*t*s*l*l+3*r*l*s*s+n*s*s*s),u}var n=la.vec2,o=function(){function e(){this.isMove=!1}return e.prototype.init=function(e,t,r){var o=r[0],a=r[1],i=r[2],c=r[3],u=r[4],s=r[5];return{endPoint:n.create(u,s),startVector:n.create(3*(o-e),3*(a-t)),endVector:n.create(3*(u-i),3*(s-c))}},e.prototype.extendFillBox=function(e,r,n,o,a){var i=o[0],c=o[1],u=o[2],s=o[3],l=o[4],v=o[5],f=t(r,i,u,l,n,c,s,v);null!=f.x[0]&&(e.l=Math.min(e.l,f.x[0]),e.r=Math.max(e.r,f.x[0])),null!=f.x[1]&&(e.l=Math.min(e.l,f.x[1]),e.r=Math.max(e.r,f.x[1])),null!=f.y[0]&&(e.t=Math.min(e.t,f.y[0]),e.b=Math.max(e.b,f.y[0])),null!=f.y[1]&&(e.t=Math.min(e.t,f.y[1]),e.b=Math.max(e.b,f.y[1])),e.l=Math.min(e.l,l),e.r=Math.max(e.r,l),e.t=Math.min(e.t,v),e.b=Math.max(e.b,v)},e.prototype.extendStrokeBox=function(e,r,n,o,a,i){var c=o[0],u=o[1],s=o[2],l=o[3],v=o[4],f=o[5],p=i.strokeThickness/2,h=t(r,c,s,v,n,u,l,f);null!=h.x[0]&&(e.l=Math.min(e.l,h.x[0]-p),e.r=Math.max(e.r,h.x[0]+p)),null!=h.x[1]&&(e.l=Math.min(e.l,h.x[1]-p),e.r=Math.max(e.r,h.x[1]+p)),null!=h.y[0]&&(e.t=Math.min(e.t,h.y[0]-p),e.b=Math.max(e.b,h.y[0]+p)),null!=h.y[1]&&(e.t=Math.min(e.t,h.y[1]-p),e.b=Math.max(e.b,h.y[1]+p)),e.l=Math.min(e.l,v),e.r=Math.max(e.r,v),e.t=Math.min(e.t,f),e.b=Math.max(e.b,f)},e}();e.BezierCurveTo=o}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){this.isMove=!1}return e.prototype.init=function(){return{endPoint:void 0,startVector:void 0,endVector:void 0}},e.prototype.extendFillBox=function(e,t,r,n,o){},e.prototype.extendStrokeBox=function(e,t,r,n,o,a){},e}();e.ClosePath=t}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){this.isMove=!1}return e.prototype.init=function(e,t,r){},e.prototype.extendFillBox=function(e,t,r,n,o){},e.prototype.extendStrokeBox=function(e,t,r,n,o,a){},e}();e.Ellipse=t}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){var t=la.vec2,r=function(){function e(){this.isMove=!0}return e.prototype.init=function(e,r,n){var o=n[0],a=n[1];return{startVector:null,endVector:null,endPoint:t.create(o,a)}},e.prototype.extendFillBox=function(e,t,r,n,o){var a=n[0],i=n[1];e.l=Math.min(e.l,a),e.r=Math.max(e.r,a),e.t=Math.min(e.t,i),e.b=Math.max(e.b,i)},e.prototype.extendStrokeBox=function(e,t,r,n,o,a){this.extendFillBox(e,t,r,n,o)},e}();e.MoveTo=r}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){function t(e,t,n,o,a,i){return{x:r(e,t,n),y:r(o,a,i)}}function r(e,t,r){var n=(e-t)/(e-2*t+r);return 0>n||n>1?null:e*Math.pow(1-n,2)+2*t*(1-n)*n+r*Math.pow(n,2)}var n=la.vec2,o=function(){function e(){this.isMove=!1}return e.prototype.init=function(e,t,r){var o=r[0],a=r[1],i=r[2],c=r[3];return{endPoint:n.create(i,c),startVector:n.create(2*(o-e),2*(a-t)),endVector:n.create(2*(i-o),2*(c-a))}},e.prototype.extendFillBox=function(e,r,n,o,a){var i=o[0],c=o[1],u=o[2],s=o[3],l=t(r,i,u,n,c,s);null!=l.x&&(e.l=Math.min(e.l,l.x),e.r=Math.max(e.r,l.x)),null!=l.y&&(e.t=Math.min(e.t,l.y),e.b=Math.max(e.b,l.y)),e.l=Math.min(e.l,u),e.r=Math.max(e.r,u),e.t=Math.min(e.t,s),e.b=Math.max(e.b,s)},e.prototype.extendStrokeBox=function(e,r,n,o,a,i){var c=o[0],u=o[1],s=o[2],l=o[3],v=i.strokeThickness/2,f=t(r,c,s,n,u,l);f.x&&(e.l=Math.min(e.l,f.x-v),e.r=Math.max(e.r,f.x+v)),f.y&&(e.t=Math.min(e.t,f.y-v),e.b=Math.max(e.b,f.y+v)),e.l=Math.min(e.l,s),e.r=Math.max(e.r,s),e.t=Math.min(e.t,l),e.b=Math.max(e.b,l)},e}();e.QuadraticCurveTo=o}(t=e.extenders||(e.extenders={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t=new e.extenders.Arc,r=new e.extenders.ArcTo,n=new e.extenders.BezierCurveTo,o=new e.extenders.ClosePath,a=new e.extenders.Ellipse,i=new e.extenders.LineTo,c=new e.extenders.MoveTo,u=new e.extenders.QuadraticCurveTo,s=function(){function e(){}return e.prototype.setFillRule=function(e){},e.prototype.closePath=function(){this.current=o,this.args=arguments},e.prototype.moveTo=function(e,t){this.current=c,this.args=arguments},e.prototype.lineTo=function(e,t){this.current=i,this.args=arguments},e.prototype.bezierCurveTo=function(e,t,r,o,a,i){this.current=n,this.args=arguments},e.prototype.quadraticCurveTo=function(e,t,r,n){this.current=u,this.args=arguments},e.prototype.arc=function(e,r,n,o,a,i){this.current=t,this.args=arguments},e.prototype.arcTo=function(e,t,n,o,a){this.current=r,this.args=arguments},e.prototype.ellipse=function(e,t,r,n,o,i,c,u){this.current=a,this.args=arguments},e}();e.ExtenderSelector=s}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(t){function r(t){var r=n.instance;if(r.compiled.length=0,"string"==typeof t){var o=e.parse.getParser();o.parse(r,t)}else"function"==typeof t.exec&&t.exec(r);return r.compiled}t.compile=r;var n=function(){function e(){this.compiled=[]}return e.prototype.setFillRule=function(e){this.compiled.push({t:CompiledOpType.setFillRule,a:[e]})},e.prototype.closePath=function(){this.compiled.push({t:CompiledOpType.closePath,a:[]})},e.prototype.moveTo=function(e,t){this.compiled.push({t:CompiledOpType.moveTo,a:[e,t]})},e.prototype.lineTo=function(e,t){this.compiled.push({t:CompiledOpType.lineTo,a:[e,t]})},e.prototype.bezierCurveTo=function(e,t,r,n,o,a){this.compiled.push({t:CompiledOpType.bezierCurveTo,a:[e,t,r,n,o,a]})},e.prototype.quadraticCurveTo=function(e,t,r,n){this.compiled.push({t:CompiledOpType.quadraticCurveTo,a:[e,t,r,n]})},e.prototype.arc=function(e,t,r,n,o,a){this.compiled.push({t:CompiledOpType.arc,a:[e,t,r,n,o,a]})},e.prototype.arcTo=function(e,t,r,n,o){this.compiled.push({t:CompiledOpType.arcTo,a:[e,t,r,n,o]})},e.prototype.ellipse=function(e,t,r,n,o,a,i,c){this.compiled.push({t:CompiledOpType.ellipse,a:[e,t,r,n,o,a,i,c]})},e.instance=new e,e}()}(t=e.compiler||(e.compiler={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){function t(e,t){for(var r=0;t&&r<t.length;r++){var n=t[r],o=void 0;if("number"==typeof n.t&&(o=CompiledOpType[n.t])){var a=e[o];a&&a.apply(e,n.a)}else console.warn("Unknown compiled path command: "+n.t+", "+n.a)}}e.decompile=t}(t=e.compiler||(e.compiler={}))}(curve||(curve={}));var CompiledOpType;!function(e){e[e.setFillRule=1]="setFillRule",e[e.closePath=2]="closePath",e[e.moveTo=3]="moveTo",e[e.lineTo=4]="lineTo",e[e.bezierCurveTo=5]="bezierCurveTo",e[e.quadraticCurveTo=6]="quadraticCurveTo",e[e.arc=7]="arc",e[e.arcTo=8]="arcTo",e[e.ellipse=9]="ellipse"}(CompiledOpType||(CompiledOpType={}));var curve;!function(e){var t;!function(e){function t(e,t,o,a,i,c,u,s,l,v){if(0===s||0===l)return void e.lineTo(a,i);var f=r.midpoint(r.create(t,o),r.create(a,i));r.rotate(f,-v);var p=s*s,h=l*l,x=f[0]*f[0],y=f[1]*f[1],d=Math.sqrt((p*h-p*y-h*x)/(p*y+h*x));c===u&&(d*=-1);var m=r.create(s*f[1]/l,-l*f[0]/s);m[0]*=d,m[1]*=d;var T=r.rotate(r.clone(m),v);T[0]+=(t+a)/2,T[1]+=(o+i)/2;var b=r.create((f[0]-m[0])/s,(f[1]-m[1])/l),M=r.create((-f[0]-m[0])/s,(-f[1]-m[1])/l),S=r.angleBetween(r.create(1,0),b),P=r.angleBetween(b,M)%n;0===u&&P>0?P-=n:1===u&&0>P&&(P+=n),e.ellipse(T[0],T[1],s,l,v,S,S+P,1-u===1)}var r=la.vec2,n=2*Math.PI;e.genEllipse=t}(t=e.ellipticalArc||(e.ellipticalArc={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){!function(e){e[e.Dom=1]="Dom",e[e.Buffer=2]="Buffer",e[e.CharMatching=3]="CharMatching"}(e.ParseStyles||(e.ParseStyles={}));e.ParseStyles}(t=e.parse||(e.parse={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){function t(){return e.style===e.ParseStyles.Buffer?new e.buffer.Parser:e.style===e.ParseStyles.Dom?new e.dom.Parser:new e.matching.Parser}e.style=e.ParseStyles.CharMatching,e.getParser=t}(t=e.parse||(e.parse={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(t){var r=function(){function t(e){this.l=0,this.t=0,this.r=0,this.b=0,this.$calc=!1,Object.defineProperties(this,{path:{value:e,writable:!1}})}return t.prototype.ensure=function(){return this.$calc||this.calculate(),this},t.prototype.calculate=function(){var t=this;this.$calc=!1,this.l=Number.POSITIVE_INFINITY,this.t=Number.POSITIVE_INFINITY,this.r=Number.NEGATIVE_INFINITY,this.b=Number.NEGATIVE_INFINITY;var r,n,o=new e.ExtenderSelector;return this.path.exec(o,function(){var e=o.current,a=e.init(r,n,o.args);e.extendFillBox(t,r,n,o.args,a),r=a.endPoint[0],n=a.endPoint[1]}),this.$calc=!0,this},t}();t.FillBounds=r}(t=e.fill||(e.fill={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){!function(e){e[e.Flat=0]="Flat",e[e.Square=1]="Square",e[e.Round=2]="Round",e[e.Triangle=3]="Triangle"}(e.PenLineCap||(e.PenLineCap={}));e.PenLineCap;!function(e){e[e.Miter=0]="Miter",e[e.Bevel=1]="Bevel",e[e.Round=2]="Round"}(e.PenLineJoin||(e.PenLineJoin={}));e.PenLineJoin}(curve||(curve={}));var curve;!function(e){var t;!function(t){var r;!function(t){function r(t,r,n){var a=n.strokeStartLineCap||n.strokeEndLineCap||0,i=o[a]||o[e.PenLineCap.Flat];i(t,r,n.strokeThickness)}var n=la.vec2;t.extendEndCap=r;var o=[];o[e.PenLineCap.Round]=function(e,t,r){var n=t.endPoint,o=n[0],a=n[1],i=r/2;e.l=Math.min(e.l,o-i),e.r=Math.max(e.r,o+i),e.t=Math.min(e.t,a-i),e.b=Math.max(e.b,a+i)},o[e.PenLineCap.Square]=function(e,t,r){var o=n.clone(t.endVector);if(o&&o[0]&&o[1]){n.normalize(o);var a=n.orthogonal(n.clone(o)),i=t.endPoint,c=i[0],u=i[1],s=r/2,l=c+s*(o[0]+a[0]),v=c+s*(o[0]-a[0]),f=u+s*(o[1]+a[1]),p=u+s*(o[1]-a[1]);e.l=Math.min(e.l,l,v),e.r=Math.max(e.r,l,v),e.t=Math.min(e.t,f,p),e.b=Math.max(e.b,f,p)}},o[e.PenLineCap.Flat]=function(e,t,r){var o=n.clone(t.endVector);if(o&&o[0]&&o[1]){n.orthogonal(n.normalize(o));var a=t.endPoint,i=a[0],c=a[1],u=r/2,s=i+u*o[0],l=i+u*-o[0],v=c+u*o[1],f=c+u*-o[1];e.l=Math.min(e.l,s,l),e.r=Math.max(e.r,s,l),e.t=Math.min(e.t,v,f),e.b=Math.max(e.b,v,f)}}}(r=t.stroke||(t.stroke={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(t){var r;!function(t){function r(t,r,a,i,c,u){var s=u.strokeThickness/2;if(u.strokeLineJoin===e.PenLineJoin.Round)return t.l=Math.min(t.l,r-s),t.r=Math.max(t.r,r+s),t.t=Math.min(t.t,a-s),void(t.b=Math.max(t.b,a+s));var l=u.strokeLineJoin===e.PenLineJoin.Miter?n(r,a,i,c,s,u.strokeMiterLimit):o(r,a,i,c,s);if(l){var v=l[0][0],f=l[0][1],p=l[1][0],h=l[1][1];t.l=Math.min(t.l,v,p),t.r=Math.max(t.r,v,p),t.t=Math.min(t.t,f,h),t.b=Math.max(t.b,f,h)}}function n(e,t,r,n,i,c){var u=a.clone(n.endVector),s=a.clone(r.startVector);if(!u||!s)return null;a.reverse(u);var l=a.angleBetween(u,s)/2;if(isNaN(l))return null;var v=1/Math.sin(l);if(v>c)return o(e,t,r,n,i);var f=a.isClockwiseTo(u,s)?a.clone(u):a.clone(s);a.normalize(a.reverse(a.rotate(f,l)));var p=i*v,h=a.create(e+p*f[0],t+p*f[1]);return[h,h]}function o(e,t,r,n,o){var i=a.clone(n.endVector),c=a.clone(r.startVector);if(i&&c){a.normalize(a.reverse(i)),a.normalize(c);var u=a.clone(i),s=a.clone(c);return a.isClockwiseTo(i,c)?(u=a.orthogonal(i),s=a.reverse(a.orthogonal(c))):(u=a.reverse(a.orthogonal(i)),s=a.orthogonal(c)),[a.create(e-o*u[0],t-o*u[1]),a.create(e-o*s[0],t-o*s[1])]}}var a=la.vec2;t.extendLineJoin=r}(r=t.stroke||(t.stroke={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(t){var r;!function(t){function r(t,r,n,a,i){var c=i.strokeStartLineCap||i.strokeEndLineCap||0,u=o[c]||o[e.PenLineCap.Flat];u(t,r,n,a,i.strokeThickness)}var n=la.vec2;t.extendStartCap=r;var o=[];o[e.PenLineCap.Round]=function(e,t,r,n,o){var a=o/2;e.l=Math.min(e.l,t-a),e.r=Math.max(e.r,t+a),e.t=Math.min(e.t,r-a),e.b=Math.max(e.b,r+a)},o[e.PenLineCap.Square]=function(e,t,r,o,a){var i=n.clone(o.startVector);if(i&&i[0]&&i[1]){n.reverse(n.normalize(i));var c=n.orthogonal(n.clone(i)),u=a/2,s=t+u*(i[0]+c[0]),l=t+u*(i[0]-c[0]),v=r+u*(i[1]+c[1]),f=r+u*(i[1]-c[1]);e.l=Math.min(e.l,s,l),e.r=Math.max(e.r,s,l),e.t=Math.min(e.t,v,f),e.b=Math.max(e.b,v,f)}},o[e.PenLineCap.Flat]=function(e,t,r,o,a){var i=n.clone(o.startVector);if(i&&i[0]&&i[1]){n.orthogonal(n.normalize(i));var c=a/2,u=t+c*i[0],s=t+c*-i[0],l=r+c*i[1],v=r+c*-i[1];e.l=Math.min(e.l,u,s),e.r=Math.max(e.r,u,s),e.t=Math.min(e.t,l,v),e.b=Math.max(e.b,l,v)}}}(r=t.stroke||(t.stroke={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.extend=function(){},e}();e.StartCapExtender=t}(t=e.stroke||(e.stroke={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(t){var r=function(){function r(e){this.l=0,this.t=0,this.r=0,this.b=0,this.$calc=!1,Object.defineProperties(this,{path:{value:e,writable:!1}})}return r.prototype.ensure=function(){return this.$calc||this.calculate(),this},r.prototype.calculate=function(){var r=this;this.$calc=!1,this.l=Number.POSITIVE_INFINITY,this.t=Number.POSITIVE_INFINITY,this.r=Number.NEGATIVE_INFINITY,this.b=Number.NEGATIVE_INFINITY;var n,o,a,i,c=new e.ExtenderSelector;return this.path.exec(c,function(){var e=c.current,u=e.init(n,o,c.args);!e.isMove&&a.isMove?t.extendStartCap(r,n,o,u,r.pars):i&&t.extendLineJoin(r,n,o,u,i,r.pars),e.extendStrokeBox(r,n,o,c.args,u,r.pars),n=u.endPoint[0],o=u.endPoint[1],a=e,i=u}),i&&t.extendEndCap(this,i,this.pars),this.$calc=!0,this},r}();t.StrokeBounds=r}(t=e.stroke||(e.stroke={}))}(t=e.bounds||(e.bounds={}))}(curve||(curve={}));var curve;!function(e){var t;!function(e){var t;!function(e){function t(e){var t=e.offset,r=e.data;r.length;if(n(r,e.offset))return e.offset+=3,NaN;var s=!1;if(45===r[e.offset]?(s=!0,e.offset++):43===r[e.offset]&&e.offset++,o(r,e.offset))return e.offset+=8,s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;a(e);var l=r[e.offset];if(46===l&&(e.offset++,!i(e)))throw new Error("Invalid number");if(!c(e))throw new Error("Invalid number");return parseFloat(u(r,t,e.offset-t))}function r(e){return e instanceof Uint8Array?e:"function"==typeof TextEncoder?(new TextEncoder).encode(e):void 0}function n(e,t){return 78===e[t+0]&&97===e[t+1]&&78===e[t+2]}function o(e,t){return 73===e[t+0]&&110===e[t+1]&&102===e[t+2]&&105===e[t+3]&&110===e[t+4]&&105===e[t+5]&&116===e[t+6]&&121===e[t+7]}function a(e){for(var t,r=e.offset,n=e.data;null!=(t=n[e.offset])&&t>=48&&57>=t;)e.offset++;return e.offset!==r}function i(e){for(var t,r=e.offset,n=e.data;null!=(t=n[e.offset])&&t>=48&&57>=t;)e.offset++;return e.offset!==r}function c(e){var t=e.data;if(69!==t[e.offset]&&101!==t[e.offset])return!0;e.offset++;var r=t[e.offset];return(45===r||43===r)&&e.offset++,a(e)}function u(e,t,r){for(var n=new Array(r),o=0;r>o;o++)n[o]=e[t+o];return String.fromCharCode.apply(null,n)}var s=function(){function e(){}return e.prototype.parse=function(e,t){r(t)},e}();e.Parser=s,e.parseNumber=t}(t=e.buffer||(e.buffer={}))}(t=e.parse||(e.parse={}))}(curve||(curve={}));var curve;!function(e){var t;!function(t){var r;!function(t){function r(t,r,a){switch(r.pathSegType){case SVGPathSeg.PATHSEG_ARC_ABS:var i=r;e.ellipticalArc.genEllipse(t,a[0],a[1],i.x,i.y,i.largeArcFlag?1:0,i.sweepFlag?1:0,i.r1,i.r2,i.angle),a[0]=i.x,a[1]=i.y;break;case SVGPathSeg.PATHSEG_ARC_REL:var c=r;e.ellipticalArc.genEllipse(t,a[0],a[1],a[0]+c.x,a[1]+c.y,c.largeArcFlag?1:0,c.sweepFlag?1:0,c.r1,c.r2,c.angle),a[0]+=c.x,a[1]+=c.y;break;case SVGPathSeg.PATHSEG_CLOSEPATH:t.closePath();break;case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var u=r;t.bezierCurveTo(u.x1,u.y1,u.x2,u.y2,u.x,u.y),a[0]=u.x,a[1]=u.y;break;case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var s=r;t.bezierCurveTo(a[0]+s.x1,a[1]+s.y1,a[0]+s.x2,a[1]+s.y2,a[0]+s.x,a[1]+s.y),a[0]+=s.x,a[1]+=s.y;break;case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var l=r;n(t,l.x2,l.y2,l.x,l.y,a);break;case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var v=r;n(t,a[0]+v.x2,a[1]+v.y2,a[0]+v.x,a[1]+v.y,a);break;case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var f=r;t.quadraticCurveTo(f.x1,f.y1,f.x,f.y),a[0]=f.x,a[1]=f.y;break;case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var p=r;t.quadraticCurveTo(a[0]+p.x1,a[1]+p.y1,a[0]+p.x,a[1]+p.y),a[0]+=p.x,a[1]+=p.y;break;case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:var h=r;o(t,h.x,h.y,a);break;case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:var x=r;o(t,a[0]+x.x,a[1]+x.y,a);break;case SVGPathSeg.PATHSEG_LINETO_ABS:var y=r;a[0]=y.x,a[1]=y.y,t.lineTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:var d=r;a[0]=d.x,t.lineTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:var m=r;a[0]+=m.x,t.lineTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_LINETO_REL:var T=r;a[0]+=T.x,a[1]+=T.y,t.lineTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:var b=r;a[1]=b.y,t.lineTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:var M=r;a[1]+=M.y,t.lineTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_MOVETO_ABS:var S=r;a[0]=S.x,a[1]=S.y,t.moveTo(a[0],a[1]);break;case SVGPathSeg.PATHSEG_MOVETO_REL:var P=r;a[0]+=P.x,a[1]+=P.y,t.moveTo(a[0],a[1]);break;default:case SVGPathSeg.PATHSEG_UNKNOWN:console.warn("Unknown path segment.")}}function n(e,t,r,n,o,a){a[0],a[1];console.warn("Smooth cubic","Not implemented")}function o(e,t,r,n){n[0],n[1];console.warn("Smooth quadratic","Not implemented")}var a=(document.createElementNS("http://www.w3.org/2000/svg","svg"),document.createElementNS("http://www.w3.org/2000/svg","path")),i=function(){function e(){}return e.prototype.parse=function(e,t){if("string"!=typeof t)return void console.warn("Input parse data was not a string.",t);a.setAttribute("d",t);for(var n=a.pathSegList,o=[0,0],i=0,c=n.numberOfItems;c>i;i++)r(e,n.getItem(i),o)},e}();t.Parser=i}(r=t.dom||(t.dom={}))}(t=e.parse||(e.parse={}))}(curve||(curve={}));var curve;!function(e){var t;!function(t){var r;!function(t){function r(t,r,n){function o(){for(var o,u,v,f={x:0,y:0},p={x:0,y:0},h=!1,x=!1,y={x:0,y:0},d={x:0,y:0};n>l;){for(var m;n>l&&" "===(m=r.charAt(l));)l++;l++;var T=!1;switch(m){case"f":case"F":if(m=r.charAt(l),"0"===m)t.setFillRule(FillRule.EvenOdd);else{if("1"!==m)return null;t.setFillRule(FillRule.NonZero)}l++,m=r.charAt(l);break;case"m":T=!0;case"M":if(o=a(),null==o)break;for(T&&(o.x+=f.x,o.y+=f.y),t.moveTo(o.x,o.y),p.x=f.x=o.x,p.y=f.y=o.y,c();s()&&null!=(o=a());)T&&(o.x+=f.x,o.y+=f.y),t.lineTo(o.x,o.y);f.x=o.x,f.y=o.y,h=x=!1;break;case"l":T=!0;case"L":for(;s()&&null!=(o=a());)T&&(o.x+=f.x,o.y+=f.y),t.lineTo(o.x,o.y),f.x=o.x,f.y=o.y,c();h=x=!1;break;case"h":T=!0;case"H":var b=i();if(null==b)break;T&&(b+=f.x),f={x:b,y:f.y},t.lineTo(f.x,f.y),h=x=!1;break;case"v":T=!0;case"V":var M=i();if(null==M)break;T&&(M+=f.y),f={x:f.x,y:M},t.lineTo(f.x,f.y),h=x=!1;break;case"c":T=!0;case"C":for(;s()&&null!=(o=a())&&(T&&(o.x+=f.x,o.y+=f.y),c(),null!=(u=a()))&&(T&&(u.x+=f.x,u.y+=f.y),c(),null!=(v=a()));)T&&(v.x+=f.x,v.y+=f.y),c(),t.bezierCurveTo(o.x,o.y,u.x,u.y,v.x,v.y),o.x=v.x,o.y=v.y;f.x=v.x,f.y=v.y,h=!0,y.x=u.x,y.y=u.y,x=!1;break;case"s":T=!0;case"S":for(;s()&&null!=(u=a())&&(T&&(u.x+=f.x,u.y+=f.y),c(),null!=(v=a()));)T&&(v.x+=f.x,v.y+=f.y),h?(o.x=2*f.x-y.x,o.y=2*f.y-y.y):o=f,t.bezierCurveTo(o.x,o.y,u.x,u.y,v.x,v.y),h=!0,y.x=u.x,y.y=u.y,f.x=v.x,f.y=v.y,c();x=!1;break;case"q":T=!0;case"Q":for(;s()&&null!=(o=a())&&(T&&(o.x+=f.x,o.y+=f.y),c(),null!=(u=a()));)T&&(u.x+=f.x,u.y+=f.y),c(),t.quadraticCurveTo(o.x,o.y,u.x,u.y),f.x=u.x,f.y=u.y;x=!0,d.x=o.x,d.y=o.y,h=!1;break;case"t":T=!0;case"T":for(;s()&&null!=(u=a());)T&&(u.x+=f.x,u.y+=f.y),x?(o.x=2*f.x-d.x,o.y=2*f.y-d.y):o=f,t.quadraticCurveTo(o.x,o.y,u.x,u.y),x=!0,d.x=o.x,d.y=o.y,f.x=u.x,f.y=u.y,c();h=!1;break;case"a":T=!0;case"A":for(;s()&&null!=(o=a());){var S=i(),P=0!==i()?1:0,C=SweepDirection.Counterclockwise;if(0!==i()&&(C=SweepDirection.Clockwise),null==(u=a()))break;T&&(u.x+=f.x,u.y+=f.y);var g=S*Math.PI/180;e.ellipticalArc.genEllipse(t,f.x,f.y,u.x,u.y,P,C,g,o.x,o.y),f.x=u.x,f.y=u.y,c()}h=x=!1;break;case"z":case"Z":t.closePath(),f.x=p.x,f.y=p.y,h=x=!1}}}function a(){var e=i();if(null==e)return null;for(var t;n>l&&(" "===(t=r.charAt(l))||","===t);)l++;if(l>=n)return null;var o=i();return null==o?null:{x:e,y:o}}function i(){c();var e=!1;if(u("-")?(e=!0,l++):u("+")&&l++,u("Infinity"))return l+=8,e?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;if(u("NaN"))return NaN;for(var t="";n>l;){var o=r.charCodeAt(l),a=r[l];if(o>=48&&57>=o)t+=a;else if(46===o)t+=a;else{if("E"!==a&&"e"!==a)break;t+=a,"-"===r[l+1]&&(t+="-",l++)}l++}if(0===t.length)return null;var i=parseFloat(t);return e?-i:i}function c(){for(var e,t;n>l&&(e=r.charCodeAt(l),!(e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e))&&(t=String.fromCharCode(e),"."!==t)&&"-"!==t&&"+"!==t;)l++}function u(e){for(var t,o,a=0;a<e.length&&n>l+a;a++)if(t=e.charAt(a),o=r.charAt(l+a),t!==o)return!1;return!0}function s(){for(var e;n>l&&(","===(e=r.charAt(l))||" "===e);)l++;if(l>=n)return!1;if("."===e||"-"===e||"+"===e)return!0;var t=r.charCodeAt(l);return t>=48&&57>=t}var l=0;o()}var n=function(){function e(){}return e.prototype.parse=function(e,t){"string"==typeof t?r(e,t,t.length):console.warn("Input parse data was not a string.",t)},e}();t.Parser=n}(r=t.matching||(t.matching={}))}(t=e.parse||(e.parse={}))}(curve||(curve={}));var FillRule;!function(e){e[e.EvenOdd=0]="EvenOdd",e[e.NonZero=1]="NonZero"}(FillRule||(FillRule={}));var SweepDirection;!function(e){e[e.Counterclockwise=0]="Counterclockwise",e[e.Clockwise=1]="Clockwise"}(SweepDirection||(SweepDirection={}));var curve;!function(e){var t=function(){function t(r){if(this.$ops=[],r instanceof t)r.exec(this);else if(Array.isArray(r))new e.compiler.decompile(this,r);else if("string"==typeof r){var n=e.parse.getParser();n.parse(this,r)}}return t.prototype.exec=function(e,t){for(var r=this.$ops,n=0;r&&n<r.length;n++)r[n](e),t&&t()},t.prototype.draw=function(e){this.exec(e)},t.prototype.addPath=function(e){e.exec(this)},t.prototype.setFillRule=function(e){this.$ops.push(function(t){return t.setFillRule(e)})},t.prototype.closePath=function(){this.$ops.push(function(e){return e.closePath()})},t.prototype.moveTo=function(e,t){this.$ops.push(function(r){return r.moveTo(e,t)})},t.prototype.lineTo=function(e,t){this.$ops.push(function(r){return r.lineTo(e,t)})},t.prototype.bezierCurveTo=function(e,t,r,n,o,a){this.$ops.push(function(i){return i.bezierCurveTo(e,t,r,n,o,a)})},t.prototype.quadraticCurveTo=function(e,t,r,n){this.$ops.push(function(o){return o.quadraticCurveTo(e,t,r,n)})},t.prototype.arc=function(e,t,r,n,o,a){this.$ops.push(function(i){return i.arc(e,t,r,n,o,a)})},t.prototype.arcTo=function(e,t,r,n,o){this.$ops.push(function(a){return a.arcTo(e,t,r,n,o)})},t.prototype.ellipse=function(e,t,r,n,o,a,i,c){this.$ops.push(function(u){return u.ellipse(e,t,r,n,o,a,i,c)})},t.parse=function(t,r){var n=e.parse.getParser();n.parse(t,r)},t}();e.Path=t}(curve||(curve={}));var curve;!function(e){function t(e){var t=new r;return e.exec(t),t.data}e.serialize=t;var r=function(){function e(){this.data=""}return e.prototype.setFillRule=function(e){this.prepend().data+="F"+e},e.prototype.closePath=function(){this.prepend().data+="Z"},e.prototype.moveTo=function(e,t){this.prepend().data+="M"+e+","+t},e.prototype.lineTo=function(e,t){this.prepend().data+="L"+e+","+t},e.prototype.bezierCurveTo=function(e,t,r,n,o,a){this.prepend().data+="C"+e+","+t+","+r+","+n+","+o+","+a},e.prototype.quadraticCurveTo=function(e,t,r,n){this.prepend().data+="Q"+e+","+t+","+r+","+n},e.prototype.arc=function(e,t,r,n,o,a){},e.prototype.arcTo=function(e,t,r,n,o){},e.prototype.ellipse=function(e,t,r,n,o,a,i,c){console.warn("serialize.ellipse","Not implemented")},e.prototype.prepend=function(){return this.data&&(this.data+=" "),this},e}()}(curve||(curve={}));
//# sourceMappingURL=curve.min.js.map
